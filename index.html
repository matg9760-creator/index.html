<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wordle FR Stable</title>

<style>
:root{
  --green:#6aaa64;
  --yellow:#e2c044;
  --gray:#787c7e;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  background:white;
}

.app{
  max-width:500px;
  width:100%;
  padding:20px;
  text-align:center;
}

.board{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-top:20px;
  align-items:center;
}

.row{
  display:flex;
  gap:6px;
}

.tile{
  width:60px;
  height:60px;
  border:2px solid #d3d6da;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  font-weight:bold;
}

.tile.green{background:var(--green);color:white;border-color:var(--green)}
.tile.yellow{background:var(--yellow);color:white;border-color:var(--yellow)}
.tile.gray{background:var(--gray);color:white;border-color:var(--gray)}

.keyboard{
  margin-top:20px;
}

.kb-row{
  display:flex;
  justify-content:center;
  gap:5px;
  margin-bottom:6px;
}

.key{
  padding:10px 12px;
  background:#d3d6da;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}

.key.wide{min-width:60px;}
</style>
</head>

<body>

<div class="app">

<h1>WORDLE</h1>
<button onclick="startGame()">Nouvelle partie</button>

<div id="board" class="board"></div>
<div id="keyboard" class="keyboard"></div>

</div>

<script>

/* ==========================
   DICTIONNAIRE FIABLE 5L
========================== */

const WORDS = [
'SALON','TABLE','PORTE','PLAGE','FLEUR',
'TRAIN','ARBRE','IMAGE','TERRE','CHAUD',
'FRUIT','BRAVE','MANGE','MONDE','NAGER',
'ROUTE','SPORT','SABLE','VIRUS','ZEBRE'
];

const WORD_LENGTH = 5;
const MAX_ROWS = 6;

let solution = '';
let grid = [];
let row = 0;
let col = 0;
let gameOver = false;

const board = document.getElementById('board');
const keyboard = document.getElementById('keyboard');

function startGame(){
  solution = WORDS[Math.floor(Math.random()*WORDS.length)];
  row = 0;
  col = 0;
  gameOver = false;
  grid = Array.from({length:MAX_ROWS},()=>Array(WORD_LENGTH).fill(''));
  drawBoard();
  drawKeyboard();
}

function drawBoard(){
  board.innerHTML='';
  for(let r=0;r<MAX_ROWS;r++){
    const rowDiv=document.createElement('div');
    rowDiv.className='row';
    for(let c=0;c<WORD_LENGTH;c++){
      const tile=document.createElement('div');
      tile.className='tile';
      tile.id=`t-${r}-${c}`;
      rowDiv.appendChild(tile);
    }
    board.appendChild(rowDiv);
  }
}

function drawKeyboard(){
  keyboard.innerHTML='';
  const KEYS=['AZERTYUIOP','QSDFGHJKLM','WXCVBN'];

  KEYS.forEach(line=>{
    const r=document.createElement('div');
    r.className='kb-row';
    [...line].forEach(letter=>{
      const key=document.createElement('div');
      key.className='key';
      key.textContent=letter;
      key.onclick=()=>type(letter);
      r.appendChild(key);
    });
    keyboard.appendChild(r);
  });

  const r=document.createElement('div');
  r.className='kb-row';

  const enter=document.createElement('div');
  enter.className='key wide';
  enter.textContent='Entrer';
  enter.onclick=check;

  const back=document.createElement('div');
  back.className='key wide';
  back.textContent='âŒ«';
  back.onclick=backspace;

  r.append(enter,back);
  keyboard.appendChild(r);
}

function type(letter){
  if(gameOver || col>=WORD_LENGTH) return;
  grid[row][col]=letter;
  document.getElementById(`t-${row}-${col}`).textContent=letter;
  col++;
}

function backspace(){
  if(col===0) return;
  col--;
  grid[row][col]='';
  document.getElementById(`t-${row}-${col}`).textContent='';
}

function check(){
  if(gameOver) return;
  if(grid[row].includes('')) return;

  const guess = grid[row].join('');
  const sol = solution.split('');
  const result = Array(WORD_LENGTH).fill('gray');

  // VERT
  for(let i=0;i<WORD_LENGTH;i++){
    if(guess[i]===sol[i]){
      result[i]='green';
      sol[i]=null;
    }
  }

  // JAUNE
  for(let i=0;i<WORD_LENGTH;i++){
    if(result[i]==='gray'){
      const idx=sol.indexOf(guess[i]);
      if(idx!==-1){
        result[i]='yellow';
        sol[idx]=null;
      }
    }
  }

  for(let i=0;i<WORD_LENGTH;i++){
    document.getElementById(`t-${row}-${i}`).classList.add(result[i]);
  }

  if(guess===solution){
    gameOver=true;
    setTimeout(()=>alert("Bravo !"),200);
    return;
  }

  row++;
  col=0;

  if(row===MAX_ROWS){
    gameOver=true;
    setTimeout(()=>alert("Perdu ! Mot : "+solution),200);
  }
}

window.addEventListener('keydown',e=>{
  if(e.key==='Enter') check();
  else if(e.key==='Backspace') backspace();
  else if(/^[a-z]$/i.test(e.key)) type(e.key.toUpperCase());
});

startGame();

</script>
</body>
</html>
